## ReplicaSet

replicaset - это набор реплик приложения. Внутри описания находится шаблон под, которые будут из него собираться
РепликаСет создавая ноды будет проставлять на них лейблы, по которым он всегда сможет определить свои поды
А у самого репликаСета есть свойство "селектор", которое точно такое же, как и леблы для под
Еще среди свойств сета есть свойство, которое говорит, сколько реплик нужно создать

RS следит за подами. Мы создали 2 и если сейчас руками один убить или добавить, rs все равно вернет к заданному
в конфиге состоянию

#### Практика по теме
в файле описан создаваемый инстантс
[replicaset.yaml](../practice/3.application-abstractions/2.replicaset/replicaset.yaml)

получим rs
```bash
NAME            DESIRED   CURRENT   READY   AGE
my-replicaset   2         2         2       69s
```
      DESIRED - запрошено 2 реплики
      CURRENT - создано 2
      READY - готово к использованию 2

получим поды
```bash
NAME                  READY   STATUS    RESTARTS   AGE
my-replicaset-7fcl2   1/1     Running   0          5m34s
my-replicaset-zdb5j   1/1     Running   0          5m34s
```
Видим, что проблему с неймингами нам решил rs

Как можно поскейлить прилу
- поправить конфиг rs и сделать apply
- kubectl scale --replicas 3 replicaset my-replicaset

Попытаемся обновить приложение. У нас nginx 12, а мы подсунем 13
- kubectl set image replicaset my-replicaset nginx=quay.io/testing-farm/nginx:1.13

Теперь если мы получим describe по RS то мы увидим, что образ обновлен
```bash
Pod Template:
  Labels:  app=my-app
  Containers:
   nginx:
    Image:         quay.io/testing-farm/nginx:1.13
```
а если мы получим сейчас поды, то мы увидим, что он давно живут и они явно не обновились. Все дело в том,
что мы лишь заменили образ в темплейте, но никто поды не пересоздавал. Но если мы сейчас грохнем 1 под, то RS поднимет
нам недостающий под и он будет на новом образе.

RS не решает проблему обновления приложения7 Он следит за количеством под и поддерживает это
